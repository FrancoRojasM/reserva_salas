
@using Microsoft.AspNetCore.Http

@using System.Configuration
@if (@Context.Session.GetString("NombreEmpleadoPerfil") != null)
{
    <!DOCTYPE html>
<html lang="es-pe">

<head>
    <meta charset="utf-8" />
        <title>@MatrixUtilitarios.DatosGlobales.NombreSoftware</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta content="width=device-width, initial-scale=1" name="viewport" />
        <meta name="Matrix" content="@Context.Session.GetString("NombreEmpresa")" />
        <meta name="author" content="CMP" />

    <!-- App favicon -->
    <link rel="shortcut icon" href="~/assets/images/favicon.ico">

        <!-- third party css -->
        
        <link href="~/assets/libs/sweetalert2/sweetalert2.min.css" rel="stylesheet" type="text/css" />

        <link href="~/assets/libs/datatables.net-bs5/css/dataTables.bootstrap5.min.css" rel="stylesheet" type="text/css" />
        <link href="~/assets/libs/datatables.net-responsive-bs5/css/responsive.bootstrap5.min.css" rel="stylesheet" type="text/css" />
        <link href="~/assets/libs/datatables.net-buttons-bs5/css/buttons.bootstrap5.min.css" rel="stylesheet" type="text/css" />
        <link href="~/assets/libs/datatables.net-select-bs5/css//select.bootstrap5.min.css" rel="stylesheet" type="text/css" />
        
         <!-- Plugins css -->
        <link href="~/assets/libs/mohithg-switchery/switchery.min.css" rel="stylesheet" type="text/css" />
        <link href="~/assets/libs/multiselect/css/multi-select.css" rel="stylesheet" type="text/css" />
        <link href="~/assets/libs/select2/css/select2.min.css" rel="stylesheet" type="text/css" />
        <link href="~/assets/libs/jqwidgets/jqx.base.css" rel="stylesheet" />
        <link href="~/assets/libs/selectize/css/selectize.bootstrap3.css" rel="stylesheet" type="text/css" />
        <link href="~/assets/libs/bootstrap-touchspin/jquery.bootstrap-touchspin.min.css" rel="stylesheet" type="text/css" />

             
    <link href="~/assets/libs/toastr/toastr.css" rel="stylesheet" />

    <!-- Plugins css -->
        <link href="~/assets/libs/quill/quill.core.css" rel="stylesheet" type="text/css" />
        <link href="~/assets/libs/quill/quill.bubble.css" rel="stylesheet" type="text/css" />
        <link href="~/assets/libs/quill/quill.snow.css" rel="stylesheet" type="text/css" />

    <!-- Theme Config Js -->
    <script src="~/assets/js/head.js"></script>

    <!-- Bootstrap css -->
    <link href="~/assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" id="app-style" />

    <!-- App css -->
    <link href="~/assets/css/app.min.css" rel="stylesheet" type="text/css" />

    <!-- Icons css -->
    <link href="~/assets/css/icons.min.css" rel="stylesheet" type="text/css" />

    <link href="~/assets/libs/dropify/css/dropify.min.css" rel="stylesheet" />
    <link href="~/assets/css/custom.css" rel="stylesheet" asp-append-version="true" />

    @RenderSection("styles", required: false)
</head>

<body>

    <!-- Begin page -->
    <div id="wrapper">
        <!-- ========== Menu ========== -->
        <div class="app-menu">

            <!-- Brand Logo -->
            <div class="logo-box">
                <!-- Brand Logo Light -->
                <a href="@Url.Action("Cuenta","Usuario")" class="logo-light">
                    <img src="@ConfigurationManager.AppSettings["HostImagenes"]LogoInstitucion.png" alt="logo" height="50" class="logo-lg">
                    <img src="@ConfigurationManager.AppSettings["HostImagenes"]LogoInstitucionSmall.png" alt="small logo" height="50" class="logo-sm">
                </a>

                <!-- Brand Logo Dark -->
                <a href="@Url.Action("Cuenta","Usuario")" class="logo-dark">
                        <img src="@ConfigurationManager.AppSettings["HostImagenes"]LogoInstitucion.png" alt="dark logo" height="50" class="logo-lg">
                        <img src="@ConfigurationManager.AppSettings["HostImagenes"]LogoInstitucionSmall.png" alt="small logo" height="50" class="logo-sm">
                </a>
            </div>

            <!-- menu-left -->
            <div class="scrollbar">              
                <!--- Menu -->
                <ul class="menu">
                       <li class="menu-item">
                            <a href="#menuEmail" data-bs-toggle="collapse" class="menu-link">
                                <span class="menu-icon"><i class="mdi mdi-account-multiple-outline"></i></span>
                                <span class="menu-text"> Inicio </span>
                                <span class="menu-arrow"></span>
                            </a>
                            <div class="collapse" id="menuEmail">
                                <ul class="sub-menu">
                                    <li class="menu-item">
                                        <a href="@Url.Action("ActualizarMenu", "Usuario", new { Controlador="",Vista=""})" class="menu-link">
                                            <span class="menu-text">Actualizar Permisos</span>
                                        </a>
                                    </li>
                                    <li class="menu-item">
                                        <a href="@Url.Action("Cuenta", "Usuario")" class="menu-link">
                                            <span class="menu-text">Mi Perfil</span>
                                        </a>
                                    </li>
                                    <li class="menu-item">
                                        <a href="@Url.Action("CerrarSesion", "Usuario")" class="menu-link">
                                            <span class="menu-text">Cerrar Sesión</span>
                                        </a>
                                    </li>                                    
                                </ul>
                            </div>
                        </li>
                       @Html.Raw(Context.Session.GetString("MenuPrincipal"))                        
                </ul>
                <!--- End Menu -->
                <div class="clearfix"></div>
            </div>
        </div>
        <!-- ========== Left menu End ========== -->
        <!-- ============================================================== -->
        <!-- Start Page Content here -->
        <!-- ============================================================== -->

        <div class="content-page">

            <!-- ========== Topbar Start ========== -->
            <div class="navbar-custom">
                <div class="topbar">
                    <div class="topbar-menu d-flex align-items-center gap-1">

                        <!-- Topbar Brand Logo -->
                        <div class="logo-box">
                            <!-- Brand Logo Light -->
                            <a href="index.html" class="logo-light">
                                <img src="@ConfigurationManager.AppSettings["HostImagenes"]LogoInstitucionSmall.png" alt="logo" class="logo-lg">
                                <img src="@ConfigurationManager.AppSettings["HostImagenes"]LogoInstitucionSmall.png" alt="small logo" class="logo-sm">
                            </a>

                            <!-- Brand Logo Dark -->
                            <a href="index.html" class="logo-dark">
                                <img src="@ConfigurationManager.AppSettings["HostImagenes"]LogoInstitucionSmall.png" alt="dark logo" class="logo-lg">
                                <img src="@ConfigurationManager.AppSettings["HostImagenes"]LogoInstitucionSmall.png" alt="small logo" class="logo-sm">
                            </a>
                        </div>

                        <!-- Sidebar Menu Toggle Button -->
                        <button class="button-toggle-menu">
                            <i class="mdi mdi-menu"></i>
                        </button>                      
                    </div>

                    <ul class="topbar-menu d-flex align-items-center">                 

                        <!-- Fullscreen Button -->
                        <li class="d-none d-md-inline-block">
                            <a class="nav-link waves-effect waves-light" href="" data-toggle="fullscreen">
                                <i class="fe-maximize font-22"></i>
                            </a>
                        </li>

                        <!-- Search Dropdown (for Mobile/Tablet) -->
                        <li class="dropdown d-lg-none">
                            <a class="nav-link dropdown-toggle waves-effect waves-light arrow-none" data-bs-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
                                <i class="ri-search-line font-22"></i>
                            </a>
                            <div class="dropdown-menu dropdown-menu-animated dropdown-lg p-0">
                                <form class="p-3">
                                    <input type="search" id="txtSearch" name="txtSearch" class="form-control" placeholder="Search ..." aria-label="Recipient's username">
                                </form>
                            </div>
                        </li>                      
                        
                      
                        <!-- Light/Darj Mode Toggle Button -->
                        <li class="d-none d-sm-inline-block">
                            <div class="nav-link waves-effect waves-light" id="light-dark-mode">
                                <i class="ri-moon-line font-22"></i>
                            </div>
                        </li>

                        <!-- User Dropdown -->
                        <li class="dropdown">
                            <a class="nav-link dropdown-toggle nav-user me-0 waves-effect waves-light" data-bs-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
                                    <img src="@ConfigurationManager.AppSettings["HostImagenes"]@Context.Session.GetString("RutaFotoUsuario").ToString()" alt="user-image" class="rounded-circle">
                                <span class="ms-1 d-none d-md-inline-block">
                                        @Context.Session.GetString("Login").ToString() <i class="mdi mdi-chevron-down"></i>
                                </span>
                            </a>
                            <div class="dropdown-menu dropdown-menu-end profile-dropdown ">
                                <!-- item-->
                                <div class="dropdown-header noti-title">
                                    <h6 class="text-overflow m-0">Bienvenido !</h6>
                                </div>

                                <!-- item-->
                                <a href="@Url.Action("Cuenta", "Usuario")" class="dropdown-item notify-item">
                                    <i class="fe-user"></i>
                                    <span>Mi Perfil</span>
                                </a>

                                <!-- item-->
                                <a href="javascript:void(0);" class="dropdown-item notify-item">
                                    <i class="fe-settings"></i>
                                    <span>Roles</span>
                                </a>

                                <div class="dropdown-divider"></div>

                                <!-- item-->
                                <a href="@Url.Action("CerrarSesion", "Usuario")" class="dropdown-item notify-item">
                                    <i class="fe-log-out"></i>
                                    <span>Cerrar sesión</span>
                                </a>

                            </div>
                        </li>

                        <!-- Right Bar offcanvas button (Theme Customization Panel) -->
                        <li>
                            <a class="nav-link waves-effect waves-light" data-bs-toggle="offcanvas" href="#theme-settings-offcanvas">
                                <i class="fe-settings font-22"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- ========== Topbar End ========== -->

            <div class="content">
                   <div class="container-fluid">
               
                <input type="hidden" id="argumentos" value="" />
                @RenderBody()
            </div>
             </div><!-- content -->
            <!-- Footer Start -->
            <footer class="footer">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-6">
                            <div>
                                @DateTime.Now.Year ® @MatrixUtilitarios.DatosGlobales.NombreSoftware - @MatrixUtilitarios.DatosGlobales.NombreInstitucionLargo ®                               
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="d-none d-md-flex gap-4 align-item-center justify-content-md-end footer-links">
                                <a href="javascript: void(0);">About</a>
                                <a href="javascript: void(0);">Support</a>
                                <a href="javascript: void(0);">Contact Us</a>
                            </div>
                        </div>
                    </div>
                </div>
            </footer>
            <!-- end Footer -->

        </div>

        <!-- ============================================================== -->
        <!-- End Page content -->
        <!-- ============================================================== -->


    </div>
    <!-- END wrapper -->
    <!-- Theme Settings -->
    <div class="offcanvas offcanvas-end right-bar" tabindex="-1" id="theme-settings-offcanvas">
        <div class="d-flex align-items-center w-100 p-0 offcanvas-header">
            <!-- Nav tabs -->
            <ul class="nav nav-tabs nav-bordered nav-justified w-100" role="tablist">
                <li class="nav-item">
                    <a class="nav-link py-2 active" data-bs-toggle="tab" href="#settings-tab" role="tab">
                        <i class="mdi mdi-cog-outline d-block font-22 my-1"></i>
                    </a>
                </li>
            </ul>
        </div>

        <div class="offcanvas-body p-3 h-100" data-simplebar>
            <!-- Tab panes -->
            <div class="tab-content pt-0">
                  <div class="tab-pane active" id="settings-tab" role="tabpanel">

                    <div class="mt-n3">
                        <h6 class="fw-medium py-2 px-3 font-13 text-uppercase bg-light mx-n3 mt-n3 mb-3">
                            <span class="d-block py-1">Theme Settings</span>
                        </h6>
                    </div>

                    <div class="alert alert-warning" role="alert">
                        <strong>Customize </strong> the overall color scheme, sidebar menu, etc.
                    </div>

                    <h5 class="fw-medium font-14 mt-4 mb-2 pb-1">Color Scheme</h5>

                    <div class="colorscheme-cardradio">
                        <div class="d-flex flex-column gap-2">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" name="data-bs-theme" id="layout-color-light" value="light">
                                <label class="form-check-label" for="layout-color-light">Light</label>
                            </div>

                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" name="data-bs-theme" id="layout-color-dark" value="dark">
                                <label class="form-check-label" for="layout-color-dark">Dark</label>
                            </div>
                        </div>
                    </div>

                    <h5 class="fw-medium font-14 mt-4 mb-2 pb-1">Content Width</h5>
                    <div class="d-flex flex-column gap-2">
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" name="data-layout-width" id="layout-width-default" value="default">
                            <label class="form-check-label" for="layout-width-default">Fluid (Default)</label>
                        </div>

                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" name="data-layout-width" id="layout-width-boxed" value="boxed">
                            <label class="form-check-label" for="layout-width-boxed">Boxed</label>
                        </div>
                    </div>

                    <div id="layout-mode">
                        <h5 class="fw-medium font-14 mt-4 mb-2 pb-1">Layout Mode</h5>

                        <div class="d-flex flex-column gap-2">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" name="data-layout-mode" id="layout-mode-default" value="default">
                                <label class="form-check-label" for="layout-mode-default">Default</label>
                            </div>


                            <div id="layout-detached">
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" name="data-layout-mode" id="layout-mode-detached" value="detached">
                                    <label class="form-check-label" for="layout-mode-detached">Detached</label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <h5 class="fw-medium font-14 mt-4 mb-2 pb-1">Topbar Color</h5>

                    <div class="d-flex flex-column gap-2">
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" name="data-topbar-color" id="topbar-color-light" value="light">
                            <label class="form-check-label" for="topbar-color-light">Light</label>
                        </div>

                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" name="data-topbar-color" id="topbar-color-dark" value="dark">
                            <label class="form-check-label" for="topbar-color-dark">Dark</label>
                        </div>

                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" name="data-topbar-color" id="topbar-color-brand" value="brand">
                            <label class="form-check-label" for="topbar-color-brand">Brand</label>
                        </div>
                    </div>

                    <div>
                        <h5 class="fw-medium font-14 mt-4 mb-2 pb-1">Menu Color</h5>

                        <div class="d-flex flex-column gap-2">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" name="data-menu-color" id="leftbar-color-light" value="light">
                                <label class="form-check-label" for="leftbar-color-light">Light</label>
                            </div>

                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" name="data-menu-color" id="leftbar-color-dark" value="dark">
                                <label class="form-check-label" for="leftbar-color-dark">Dark</label>
                            </div>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" name="data-menu-color" id="leftbar-color-brand" value="brand">
                                <label class="form-check-label" for="leftbar-color-brand">Brand</label>
                            </div>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" name="data-menu-color" id="leftbar-color-gradient" value="gradient">
                                <label class="form-check-label" for="leftbar-color-gradient">Gradient</label>
                            </div>
                        </div>
                    </div>

                    <div id="menu-icon-color">
                        <h5 class="fw-medium font-14 mt-4 mb-2 pb-1">Menu Icon Color</h5>

                        <div class="d-flex flex-column gap-2">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" name="data-two-column-color" id="twocolumn-menu-color-light" value="light">
                                <label class="form-check-label" for="twocolumn-menu-color-light">Light</label>
                            </div>

                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" name="data-two-column-color" id="twocolumn-menu-color-dark" value="dark">
                                <label class="form-check-label" for="twocolumn-menu-color-dark">Dark</label>
                            </div>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" name="data-two-column-color" id="twocolumn-menu-color-brand" value="brand">
                                <label class="form-check-label" for="twocolumn-menu-color-brand">Brand</label>
                            </div>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" name="data-two-column-color" id="twocolumn-menu-color-gradient" value="gradient">
                                <label class="form-check-label" for="twocolumn-menu-color-gradient">Gradient</label>
                            </div>
                        </div>
                    </div>

                    <div id="sidebar-size">
                        <h5 class="fw-medium font-14 mt-4 mb-2 pb-1">Sidebar Size</h5>

                        <div class="d-flex flex-column gap-2">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" name="data-sidenav-size" id="leftbar-size-default" value="default">
                                <label class="form-check-label" for="leftbar-size-default">Default</label>
                            </div>

                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" name="data-sidenav-size" id="leftbar-size-compact" value="compact">
                                <label class="form-check-label" for="leftbar-size-compact">Compact (Medium Width)</label>
                            </div>

                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" name="data-sidenav-size" id="leftbar-size-small" value="condensed">
                                <label class="form-check-label" for="leftbar-size-small">Condensed (Icon View)</label>
                            </div>

                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" name="data-sidenav-size" id="leftbar-size-full" value="full">
                                <label class="form-check-label" for="leftbar-size-full">Full Layout</label>
                            </div>

                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" name="data-sidenav-size" id="leftbar-size-fullscreen" value="fullscreen">
                                <label class="form-check-label" for="leftbar-size-fullscreen">Fullscreen Layout</label>
                            </div>
                        </div>
                    </div>

                    <div id="sidebar-user">
                        <h5 class="fw-medium font-14 mt-4 mb-2 pb-1">Sidebar User Info</h5>

                        <div class="form-check form-switch">
                            <input type="checkbox" class="form-check-input" name="data-sidebar-user" id="sidebaruser-check">
                            <label class="form-check-label" for="sidebaruser-check">Enable</label>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <div class="offcanvas-footer border-top py-2 px-2 text-center">
            <div class="d-flex gap-2">
                <button type="button" class="btn btn-light w-100" id="reset-layout">Resetear</button>             
            </div>
        </div>
    </div>

    <!-- Vendor js -->
    <script src="~/assets/js/vendor.min.js"></script>

    <!-- App js -->
    <script src="~/assets/js/app.min.js"></script>
    <script src="~/assets/libs/dropify/js/dropify.min.js"></script>

     <!-- third party js -->
      <!-- Datatables -->
        <script src="~/assets/libs/datatables.net/js/jquery.dataTables.min.js"></script>
        <script src="~/assets/libs/datatables.net-bs5/js/dataTables.bootstrap5.min.js"></script>
        <script src="~/assets/libs/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
        <script src="~/assets/libs/datatables.net-responsive-bs5/js/responsive.bootstrap5.min.js"></script>
        <script src="~/assets/libs/datatables.net-buttons/js/dataTables.buttons.min.js"></script>
        <script src="~/assets/libs/datatables.net-buttons-bs5/js/buttons.bootstrap5.min.js"></script>
        <script src="~/assets/libs/datatables.net-buttons/js/buttons.html5.min.js"></script>
        <script src="~/assets/libs/datatables.net-buttons/js/buttons.flash.min.js"></script>
        <script src="~/assets/libs/datatables.net-buttons/js/buttons.print.min.js"></script>
        <script src="~/assets/libs/datatables.net-keytable/js/dataTables.keyTable.min.js"></script>
        <script src="~/assets/libs/datatables.net-select/js/dataTables.select.min.js"></script>
        <script src="~/assets/libs/pdfmake/build/pdfmake.min.js"></script>
        <script src="~/assets/libs/pdfmake/build/vfs_fonts.js"></script>        
        <script src="~/assets/js/pages/datatables.init.js"></script>

         <!-- Controles Avanzados -->
        <script src="~/assets/libs/selectize/js/standalone/selectize.min.js"></script>
        <script src="~/assets/libs/mohithg-switchery/switchery.min.js"></script>
        <script src="~/assets/libs/multiselect/js/jquery.multi-select.js"></script>
        <script src="~/assets/libs/select2/js/select2.min.js"></script>

        <script src="~/assets/libs/jqwidgets/jqxcore.js"></script>
        <script src="~/assets/libs/jqwidgets/jqxdata.js"></script>
        <script src="~/assets/libs/jqwidgets/jqxinput.js"></script>


        <script src="~/assets/libs/jquery-mockjax/jquery.mockjax.min.js"></script>
        <script src="~/assets/libs/devbridge-autocomplete/jquery.autocomplete.min.js"></script>
        <script src="~/assets/libs/bootstrap-touchspin/jquery.bootstrap-touchspin.min.js"></script>
        <script src="~/assets/libs/bootstrap-maxlength/bootstrap-maxlength.min.js"></script>
        <script src="~/assets/libs/parsleyjs/parsley.min.js"></script>

         <script src="~/assets/libs/html5-form-validation/jquery.validation.min.js"></script>

          <script src="~/assets/libs/jquery-toast-plugin/jquery.toast.min.js"></script>
          <script src="~/assets/libs/toastr/toastr.min.js"></script>
<script src="~/assets/libs/sweetalert2/sweetalert2.all.min.js"></script>

 <!-- Plugins js -->
        <script src="~/assets/libs/quill/quill.min.js"></script>
        <script src="~/assets/libs/jquery-ui-1.13.2/jquery-ui.js"></script> 
        
        
        @RenderSection("scripts", required: false)
 <script>
        // ParsleyConfig definition if not already set
        // Validation errors messages for Parsley
        // Load this after Parsley

        Parsley.addMessages('es', {
            defaultMessage: "Este campo parece ser inválido.",
            type: {
                email: "Este campo debe ser un correo válido.",
                url: "Este campo debe ser una URL válida.",
                number: "Este campo debe ser un número válido.",
                integer: "Este campo debe ser un número válido.",
                digits: "Este campo debe ser un dígito válido.",
                alphanum: "Este campo debe ser alfanumérico."
            },
            notblank: "Este campo no debe estar en blanco.",
            required: "Este campo es obligatorio.",
            pattern: "Este campo es incorrecto.",
            min: "Este campo no debe ser menor que %s.",
            max: "Este campo no debe ser mayor que %s.",
            range: "Este campo debe estar entre %s y %s.",
            minlength: "Este campo es muy corto. La longitud mínima es de %s caracteres.",
            maxlength: "Este campo es muy largo. La longitud máxima es de %s caracteres.",
            length: "La longitud de este campo debe estar entre %s y %s caracteres.",
            mincheck: "Debe seleccionar al menos %s opciones.",
            maxcheck: "Debe seleccionar %s opciones o menos.",
            check: "Debe seleccionar entre %s y %s opciones.",
            equalto: "Este campo debe ser idéntico."
        });

        Parsley.setLocale('es');
    </script>
         <script>


            // ParsleyConfig definition if not already set
// Validation errors messages for Parsley
// Load this after Parsley



             $('.modal-dialog').draggable({ handle: ".modal-header" });

            function habilitarSoloNumeros(inputId, minLength, maxLength) {
                $("#" + inputId).on("keydown", function (event) {
                    // Permitir solo teclas numéricas y algunas teclas de control
                    if (
                        !(event.key === "Backspace" || event.key === "Delete" || event.key === "ArrowLeft" || event.key === "ArrowRight") &&
                        (isNaN(event.key) || $(this).val().length >= maxLength)
                    ) {
                        event.preventDefault();
                    }

                    // Limitar la longitud del campo
                    var currentValue = $(this).val();
                    if (currentValue.length >= maxLength) {
                        $(this).val(currentValue.substring(0, maxLength));
                        event.preventDefault();
                    }
                });
            }

             function ValidarSesionActual(error, thrown) {
                if (error == 'error' || thrown == 500 || thrown == 403 || thrown == 'Forbidden') {
                    swal({
                        title: 'Alerta',
                        text: 'Por seguridad hemos caducado la sesión, esta ventana se cerrará automaticamente en 5 segundos, vuelva a ingresar con su usuario y contraseña.',
                        timer: 5000,
                        onOpen: function () {
                            swal.showLoading()
                        }
                    }).then(
                        function () {
                            window.location.href = "@Url.Action("Login", "Usuario")";
                        },
                        function (dismiss) {
                            if (dismiss === 'timer') {
                                window.location.href = "@Url.Action("Login", "Usuario")";
                            }
                        })
                }
            }
            function ValidarSesionActivaUsuario() {
                $.ajax({
                    url: "@Url.Action("ping", "Modulo")",                    
                    method: 'GET',
                    global: false,
                    success: function (respuesta) {
                        if (respuesta == -1) {
                            window.location.replace('@Url.Action("ActualizarMenu", "Usuario")');
                        }
                    },
                    error: function (mensaje, error, thrown) {
                        ValidarSesionActual(error, thrown);
                    }
                });
            }
             function DescargarArchivoInicial(NombreArchivo) {                    
                    window.open('@ConfigurationManager.AppSettings["HostArchivos"]'+NombreArchivo, '_blank');
                }
             $(function () {
               
                setInterval(function () {
                    ValidarSesionActivaUsuario();
                }, 5000);

            });
        
            </Script>


</body>
</html>
}